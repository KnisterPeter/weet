<html>
<head>
<title>Smoke a bit</title>
</head>
<body>
<h1>Weet Test</h1>

<ul>
  <li class="hash_test">not good</li>
  <li class="test_wert">not good</li>
  <li class="set_test_wert">not good</li>
  <li class="decode">not good</li>
  <li class="hash">not good</li>
  <li class="extend">not good</li>
  <li class="extend2">not good</li>
  <li class="extend_from_hash">not good</li>
</ul>
<a href='#^!"$%&%20 /()=_:;<>,.-+~{[]}'>case1</a>
<a href='# wurst'>case1</a>
<br/>Static-Links:
<div class="static_links">
<a href="# test">[ ]</a>&nbsp;
<a href="#!test">[!]</a>&nbsp;
<a href="#&quot;test">["]</a>&nbsp;
<a href="##test">[#]</a>&nbsp;
<a href="#$test">[$]</a>&nbsp;
<a href="#%test">[%]</a>&nbsp;
<a href="#&amp;test">[&amp;]</a>&nbsp;
<a href="#'test">[']</a>&nbsp;
<a href="#(test">[(]</a>&nbsp;
<a href="#)test">[)]</a>&nbsp;
<a href="#*test">[*]</a>&nbsp;
<a href="#+test">[+]</a>&nbsp;
<a href="#,test">[,]</a>&nbsp;
<a href="#-test">[-]</a>&nbsp;
<a href="#.test">[.]</a>&nbsp;
<a href="#/test">[/]</a>&nbsp;
<a href="#:test">[:]</a>&nbsp;
<a href="#;test">[;]</a>&nbsp;
<a href="#&lt;test">[&lt;]</a>&nbsp;
<a href="#=test">[=]</a>&nbsp;
<a href="#&gt;test">[&gt;]</a>&nbsp;
<a href="#?test">[?]</a>&nbsp;
<a href="#@test">[@]</a>&nbsp;
<a href="#[test">[[]</a>&nbsp;
<a href="#\test">[\]</a>&nbsp;
<a href="#]test">[]]</a>&nbsp;
<a href="#^test">[^]</a>&nbsp;
<a href="#_test">[_]</a>&nbsp;
<a href="#`test">[`]</a>&nbsp;
<a href="#{test">[{]</a>&nbsp;
<a href="#|test">[|]</a>&nbsp;
<a href="#}test">[}]</a>&nbsp;
<a href="#~test">[~]</a>&nbsp;
</div>
<br/>UrlEncode-Links:
<div class="static_links">
<a href="#%20test">[ ]</a>&nbsp;
<a href="#%21test">[!]</a>&nbsp;
<a href="#%22test">["]</a>&nbsp;
<a href="#%23test">[#]</a>&nbsp;
<a href="#%24test">[$]</a>&nbsp;
<a href="#%25test">[%]</a>&nbsp;
<a href="#%26test">[&amp;]</a>&nbsp;
<a href="#%27test">[']</a>&nbsp;
<a href="#%28test">[(]</a>&nbsp;
<a href="#%29test">[)]</a>&nbsp;
<a href="#%2Atest">[*]</a>&nbsp;
<a href="#%2Btest">[+]</a>&nbsp;
<a href="#%2Ctest">[,]</a>&nbsp;
<a href="#%2Dtest">[-]</a>&nbsp;
<a href="#%2Etest">[.]</a>&nbsp;
<a href="#%2Ftest">[/]</a>&nbsp;
<a href="#%3Atest">[:]</a>&nbsp;
<a href="#%3Btest">[;]</a>&nbsp;
<a href="#%3Ctest">[&lt;]</a>&nbsp;
<a href="#%3Dtest">[=]</a>&nbsp;
<a href="#%3Etest">[&gt;]</a>&nbsp;
<a href="#%3Ftest">[?]</a>&nbsp;
<a href="#%40test">[@]</a>&nbsp;
<a href="#%5Btest">[[]</a>&nbsp;
<a href="#%5Ctest">[\]</a>&nbsp;
<a href="#%5Dtest">[]]</a>&nbsp;
<a href="#%5Etest">[^]</a>&nbsp;
<a href="#%5Ftest">[_]</a>&nbsp;
<a href="#%60test">[`]</a>&nbsp;
<a href="#%7Btest">[{]</a>&nbsp;
<a href="#%7Ctest">[|]</a>&nbsp;
<a href="#%7Dtest">[}]</a>&nbsp;
<a href="#%7Etest">[~]</a>&nbsp;
</div>
<br/>Links:
<div class="links">
</div>
<br/>Hash-Value:<span class="value"></span>
<br/>Weet-Value:<span class="weet"></span>


<script type="text/javascript">
  this.alert=function(a) { }
</script>
<script src="http://www.json.org/json2.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script>
<script src="http://documentcloud.github.com/underscore/underscore-min.js" type="text/javascript"></script>
<script src="http://joose-js.googlecode.com/files/joose.mini.js" type="text/javascript"></script>
<script src="http://github.com/mabels/q_code/raw/master/q_code.js" type="text/javascript"></script>
<script src="weet.js"></script>
<script>
$(function() {
  var link = $('<a></a>')
  for(var i = ' '.charCodeAt(0); i < '0'.charCodeAt(0); ++i) {
    $('.links').append(link.clone().attr('href', '#'+String.fromCharCode(i)+'test').html('['+String.fromCharCode(i)+']')).append('&nbsp;&nbsp;')
  }
  for(var i = '9'.charCodeAt(0)+1; i < 'A'.charCodeAt(0); ++i) {
    $('.links').append(link.clone().attr('href', '#'+String.fromCharCode(i)+'test').html('['+String.fromCharCode(i)+']')).append('&nbsp;&nbsp;')
  }
  for(var i = 'Z'.charCodeAt(0)+1; i < 'a'.charCodeAt(0); ++i) {
    $('.links').append(link.clone().attr('href', '#'+String.fromCharCode(i)+'test').html('['+String.fromCharCode(i)+']')).append('&nbsp;&nbsp;')
  }
  for(var i = 'z'.charCodeAt(0)+1; i < 127; ++i) {
    $('.links').append(link.clone().attr('href', '#'+String.fromCharCode(i)+'test').html('['+String.fromCharCode(i)+']')).append('&nbsp;&nbsp;')
  }
  setInterval(function() { 
    $('.value').html('['+window.location.hash.slice(1)+']') 
    $('.weet').html('['+JSON.stringify(Weet.obj())+']') 
  }, 200)
  var val = '^!"$%&%20 /()=_:;<>,.-+~{[]}'
  window.location.hash = val
  if (val == window.location.hash.slice(1)) {
    $('.hash_test').html('hash is fine:'+val)
  } else {
    $('.hash_test').html('HASH different:'+val+"========="+window.location.hash.slice(1))
  }
  window.location.hash = Q.encode(JSON.stringify({ test: { wert : "from hash" } }))
  var id = Weet.subscribe('test.wert', function(val) { $('.test_wert').html('good='+val) })
  Weet.unsubscribe(id)
  Weet.set('test.wert', 'direct+ +Xklar?')
  var id = Weet.subscribe('test.wert', function(val) { $('.set_test_wert').html('direct='+val) })
  $('.decode').html('direct='+JSON.parse(Q.decode(window.location.hash.slice(1))).test.wert)
  $('.hash').html('pot=' + JSON.parse(Q.decode(Weet.createHash('test.hash', 'pot'))).test.hash)
  
  // extend
  Weet.subscribe('extend.me', function(val) { $('.extend').html('extend=' + val) })
  Weet.extend({extend:{me: 'extend'}})

  // extendHash
  $('.extend2').html('too extended=' + JSON.parse(Q.decode(Weet.extendHash({extend:{me2: 'too extended'}}))).extend.me2)

  var id = Weet.subscribe('meno', function(val) {
    $('.extend_from_hash').html('ist doof=' + val) 
  })
  var obj = Weet.parse_hash(window.location.hash)
  obj.meno = "ist doof"
  window.location.hash = Q.encode(JSON.stringify(obj)) 
  //Weet.unsubscribe(id)



})
</script>
</body>
</html>
